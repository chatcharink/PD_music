<div class="question-answer p-3 border w-75 rounded-3 m-auto mb-3">
    <!-- Question -->
    <div class="mb-3">
        <label for="question_<%= question_no %>" class="form-label head-question-no">Question <%= question_no %> : </label>
        
        <div class="row mb-3">
            <div class="col-sm-8">
                <%= text_field_tag "form_questions[question#{question_no}][text]", params["question_#{question_no}"], class: "form-control w-100 d-inline question-value-#{question_no}", id: "question_#{question_no}" %>
            </div>
            <div class="col-sm-4 dropdown" style="align-content: center;">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots-vertical" viewBox="0 0 16 16" data-bs-toggle="dropdown" aria-expanded="false">
                    <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"/>
                </svg>

                <ul class="dropdown-menu">
                    <li>
                        <label class="dropdown-item" for="question_picture_<%= question_no %>">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-image me-3" viewBox="0 0 16 16">
                                <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"/>
                                <path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1z"/>
                            </svg> Picture
                        </label>
                        <%= file_field_tag "form_questions[question#{question_no}][media]", accept: ".png, .jpg, .jpeg", data: { action: "change->homework#uploadPicture" }, "data-homework-no-param": question_no, class: "question-media question-value-#{question_no}", id: "question_picture_#{question_no}" %>
                    </li>
                    <li>
                        <label class="dropdown-item" for="question_video_<%= question_no %>">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-film me-3" viewBox="0 0 16 16">
                                <path d="M0 1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1zm4 0v6h8V1zm8 8H4v6h8zM1 1v2h2V1zm2 3H1v2h2zM1 7v2h2V7zm2 3H1v2h2zm-2 3v2h2v-2zM15 1h-2v2h2zm-2 3v2h2V4zm2 3h-2v2h2zm-2 3v2h2v-2zm2 3h-2v2h2z"/>
                            </svg> Video
                        </label>
                        <%= file_field_tag "form_questions[question#{question_no}][media]", accept: ".mp4, .mov, .avi, .flv, .wmv, .webm", data: { action: "change->homework#uploadVideo" }, "data-homework-no-param": question_no, class: "question-media question-value-#{question_no}", id: "question_video_#{question_no}" %>
                    </li>
                    <li>
                        <label class="dropdown-item" for="question_audio_<%= question_no %>">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-music-note-list me-3" viewBox="0 0 16 16">
                                <path d="M12 13c0 1.105-1.12 2-2.5 2S7 14.105 7 13s1.12-2 2.5-2 2.5.895 2.5 2"/>
                                <path fill-rule="evenodd" d="M12 3v10h-1V3z"/>
                                <path d="M11 2.82a1 1 0 0 1 .804-.98l3-.6A1 1 0 0 1 16 2.22V4l-5 1z"/>
                                <path fill-rule="evenodd" d="M0 11.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5m0-4A.5.5 0 0 1 .5 7H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5m0-4A.5.5 0 0 1 .5 3H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5"/>
                            </svg> Audio
                        </label>
                        <%= file_field_tag "form_questions[question#{question_no}][media]", accept: ".mp3, .wav, .flac, .alac, wma", data: { action: "change->homework#uploadAudio" }, "data-homework-no-param": question_no, class: "question-media question-value-#{question_no}", id: "question_audio_#{question_no}" %>
                    </li>
                </ul>
            </div>
        </div>

        <div class="media-questions text-center" id="div-media-<%= question_no %>">
            <img id="picture-question-<%= question_no %>"/>
        </div>
    </div>

    
    <!-- Answer -->
    <div class="mb-3">
        <label class="form-label me-3">Answer: </label>

        <div class="dropdown d-inline">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle-fill" viewBox="0 0 16 16" data-bs-toggle="dropdown" aria-expanded="false">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z"/>
            </svg>

            <ul class="dropdown-menu">
                <li>
                    <button type="button" class="dropdown-item" data-action="click->homework#selectAnswerFormat" data-homework-format-param="1" data-homework-url-param="<%= homework_answer_format_path() %>" data-homework-question-no-param="<%= question_no %>">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grid-3x2-gap" viewBox="0 0 16 16">
                            <path d="M4 4v2H2V4zm1 7V9a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1m0-5V4a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1m5 5V9a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1m0-5V4a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1M9 4v2H7V4zm5 0h-2v2h2zM4 9v2H2V9zm5 0v2H7V9zm5 0v2h-2V9zm-3-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1zm1 4a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1z"/>
                        </svg> Select chord
                    </button>
                </li>
                <li>
                    <button type="button" class="dropdown-item" data-action="click->homework#selectAnswerFormat" data-homework-format-param="2" data-homework-url-param="<%= homework_answer_format_path() %>" data-homework-question-no-param="<%= question_no %>">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-ol" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5"/>
                            <path d="M1.713 11.865v-.474H2c.217 0 .363-.137.363-.317 0-.185-.158-.31-.361-.31-.223 0-.367.152-.373.31h-.59c.016-.467.373-.787.986-.787.588-.002.954.291.957.703a.595.595 0 0 1-.492.594v.033a.615.615 0 0 1 .569.631c.003.533-.502.8-1.051.8-.656 0-1-.37-1.008-.794h.582c.008.178.186.306.422.309.254 0 .424-.145.422-.35-.002-.195-.155-.348-.414-.348h-.3zm-.004-4.699h-.604v-.035c0-.408.295-.844.958-.844.583 0 .96.326.96.756 0 .389-.257.617-.476.848l-.537.572v.03h1.054V9H1.143v-.395l.957-.99c.138-.142.293-.304.293-.508 0-.18-.147-.32-.342-.32a.33.33 0 0 0-.342.338zM2.564 5h-.635V2.924h-.031l-.598.42v-.567l.629-.443h.635z"/>
                        </svg> Choices
                    </button>
                </li>
                <li>
                    <button type="button" class="dropdown-item" data-action="click->homework#selectAnswerFormat" data-homework-format-param="3" data-homework-url-param="<%= homework_answer_format_path() %>" data-homework-question-no-param="<%= question_no %>">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
                            <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z"/>
                        </svg> Upload files
                    </button>
                </li>
            </ul>
        </div>
    </div>

    <%= hidden_field_tag "form_questions[question#{question_no}][selected_format]", "", id: "selected-format-#{question_no}" %>
    <div class="mb-3 selected-answer-<%= question_no %>"></div>

    <div class="mb-3">
        <label class="form-label me-3">Correct answer: </label>
        <%= select_tag "form_questions[question#{question_no}][correct_answers]", [] , {class: "form-control select-answer", id: "select-answer-#{question_no}", multiple: true} %>
    </div>
</div>